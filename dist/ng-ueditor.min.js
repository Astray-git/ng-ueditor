!function(){"use strict";var t=function(t,e,n,r){var i=0,o="ng-ueditor",d=function(d,a,u,s){if(void 0===t.UE)return void e.warn("Can not load ueditor.");var l,v=!1,c=s[0],f=d.$eval(u.ngUeditor),$=d.$eval(u.ready),g=void 0!==u.allHtml,m=o+"-"+i++;u.$set("id",m);var w=function(t){c.$setViewValue(t),r.$applyAsync()},A=function(t){var e=t.getContent().trim();e=n.trustAsHtml(e),w(e)},E=function(t){var e=t.getAllHtml().trim();e=n.trustAsHtml(e),w(e)};c.$formatters.unshift(function(t){return t?n.trustAsHtml(t):""}),c.$parsers.unshift(function(t){return t?n.getTrustedHtml(t):""}),c.$render=function(){var t=c.$viewValue?n.getTrustedHtml(c.$viewValue):"";void 0!==l&&v===!0&&(l.setContent(t),l.fireEvent("contentChange"))},l=UE.getEditor(m,f);var H=function(){v=!0;var t=g===!0?E.bind(void 0,l):A.bind(void 0,l);l.addListener("afterExecCommand",t),l.addListener("contentChange",t),f.enableAutoSave===!1&&l.addListener("showmessage",function(t,e){return"本地保存成功"===e.content?!0:void 0}),angular.isFunction($)&&$(l),c.$render(),c.$setPristine()};l.ready(H),d.$on("$destroy",function(){void 0!==l&&(UE.delEditor(m),l=void 0)})};return{restrict:"A",require:["ngModel"],link:d}};angular.module("ng.ueditor",[]).directive("ngUeditor",["$window","$log","$sce","$rootScope",t])}();